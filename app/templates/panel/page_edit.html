{% extends "panel/base.html" %}

{% block title %}Edycja strony: {{ page.title }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-800">Edycja strony: {{ page.title }}</h2>
</div>

<form method="post" action="/panel/pages/{{ page.slug }}" class="space-y-6">
    {{ csrf_input(request) }}
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="lg:col-span-2 space-y-6">
            <div class="bg-white rounded-lg shadow-sm p-6">
                <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Tytuł</label>
                <input type="text" id="title" name="title" required value="{{ page.title }}"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-fire-500 focus:border-transparent text-lg">
            </div>
            <div class="bg-white rounded-lg shadow-sm p-6">
                <label for="content_md" class="block text-sm font-medium text-gray-700 mb-1">Treść (Markdown)</label>
                <textarea id="content_md" name="content_md" rows="15">{{ page.content_md }}</textarea>
            </div>
        </div>

        <div class="space-y-6">
            <div class="bg-white rounded-lg shadow-sm p-6 space-y-4">
                <p class="text-sm font-medium text-gray-700">SEO</p>
                <div>
                    <label for="meta_title" class="block text-xs text-gray-500 mb-1">Meta title</label>
                    <input type="text" id="meta_title" name="meta_title"
                           value="{{ page.meta_title or '' }}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fire-500">
                </div>
                <div>
                    <label for="meta_description" class="block text-xs text-gray-500 mb-1">Meta description</label>
                    <textarea id="meta_description" name="meta_description" rows="2"
                              class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-fire-500">{{ page.meta_description or '' }}</textarea>
                </div>
                <button type="submit"
                        class="w-full bg-fire-600 text-white py-2 px-4 rounded-md hover:bg-fire-700 transition-colors font-medium">
                    Zapisz
                </button>
            </div>
        </div>
    </div>
</form>
{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
<script>
    new EasyMDE({
        element: document.getElementById('content_md'),
        spellChecker: false,
        status: ['lines', 'words'],
        minHeight: '300px',
        toolbar: ['bold', 'italic', 'heading', '|', 'quote', 'unordered-list', 'ordered-list', '|', 'link', 'image', '|', 'preview', 'side-by-side', 'fullscreen', '|', 'guide'],
    });
</script>
{% endblock %}
